<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Building a Customer Support Agent: From Linear Flows to Expert Routing | Thinking in Agents</title>
<meta name="keywords" content="">
<meta name="description" content="Traditional customer service bots rely heavily on if/else rules and rigid intent-matching. The moment a user says something vague or deviates from the expected flow, the system breaks down. This is what we call ‚Äúprocess thinking.‚Äù
In the Agent era, we shift toward ‚Äústrategic thinking‚Äù ‚Äî building intelligent systems that can make decisions autonomously and dynamically route conversations to the right experts. Such a system isn‚Äôt just an LLM; it‚Äôs an LLM-powered network of specialized experts.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/building_a_customer_support_agent/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/building_a_customer_support_agent/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Thinking in Agents (Alt + H)">Thinking in Agents</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Building a Customer Support Agent: From Linear Flows to Expert Routing
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2025-11-11 17:03:14 +0800 CST'>November 11, 2025</span>

</div>
  </header> 
  <div class="post-content"><p>Traditional customer service bots rely heavily on <em>if/else</em> rules and rigid intent-matching. The moment a user says something vague or deviates from the expected flow, the system breaks down. This is what we call <strong>‚Äúprocess thinking.‚Äù</strong></p>
<p>In the Agent era, we shift toward <strong>‚Äústrategic thinking‚Äù</strong> ‚Äî building intelligent systems that can make decisions autonomously and dynamically route conversations to the right experts. Such a system isn‚Äôt just an LLM; it‚Äôs an <strong>LLM-powered network of specialized experts.</strong></p>
<p>This article walks through a practical implementation of a <strong>multi-expert customer service Agent</strong> using five core prompts and <strong>LangGraph</strong>, showing how this shift in thinking comes to life.</p>
<hr>
<h2 id="architecture-evolution-the-expert-router-strategy"><strong>Architecture Evolution: The ‚ÄúExpert Router‚Äù Strategy</strong><a hidden class="anchor" aria-hidden="true" href="#architecture-evolution-the-expert-router-strategy">#</a></h2>
<p>The key design principle of a support Agent is simple: use a central ‚Äúrouter brain‚Äù to classify user queries, then delegate each one to the <strong>expert model</strong> best suited to handle it.</p>
<table>
  <thead>
      <tr>
          <th>Module</th>
          <th>Role</th>
          <th>Core Strategy</th>
          <th>Prompt</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Main Controller</strong></td>
          <td>Commander</td>
          <td>Decides intent and routing path</td>
          <td>Intent Classifier</td>
      </tr>
      <tr>
          <td><strong>Expert Models</strong></td>
          <td>Domain Experts</td>
          <td>Solve specialized sub-goals</td>
          <td>Judgment / Information / Chitchat / Exception Assistants</td>
      </tr>
  </tbody>
</table>
<hr>
<p><img alt="this is a image" loading="lazy" src="/images/workflow_of_customer_service_agent.png" title="workflow_of_customer_service_agent"></p>
<h2 id="execution-flow-overview"><strong>Execution Flow Overview</strong><a hidden class="anchor" aria-hidden="true" href="#execution-flow-overview">#</a></h2>
<ol>
<li>The user submits a question.</li>
<li>The <strong>Main Controller (Router)</strong> analyzes the input and returns a routing key.</li>
<li>The system forwards the query and context to the corresponding <strong>Expert Model</strong>.</li>
<li>Each expert, guided by its own specialized prompt and tools, generates a professional response.</li>
</ol>
<hr>
<h2 id="step-1-the-core-module--designing-the-five-expert-prompts"><strong>Step 1: The Core Module ‚Äî Designing the Five Expert Prompts</strong><a hidden class="anchor" aria-hidden="true" href="#step-1-the-core-module--designing-the-five-expert-prompts">#</a></h2>
<h3 id="-1-the-router-main-controller">üö¶ 1. The Router (Main Controller)<a hidden class="anchor" aria-hidden="true" href="#-1-the-router-main-controller">#</a></h3>
<p>This is the Agent‚Äôs <strong>brain</strong> and the starting point of all decisions.
Its goal isn‚Äôt to answer, but to identify intent and route efficiently.</p>
<p><strong>Prompt Strategy:</strong>
Force <em>mutually exclusive classification</em> (ensuring only one route per query) and output in structured JSON for easy parsing.</p>
<p><strong>Thinking Upgrade:</strong>
From ‚Äúintent matching‚Äù to ‚Äústrategic routing.‚Äù
Instead of just classifying <em>what</em> the question is about (‚Äúa refund‚Äù), it determines <em>how</em> it should be handled (‚Äúa yes/no refund decision‚Äù).</p>
<table>
  <thead>
      <tr>
          <th>Category Key</th>
          <th>Expert Model</th>
          <th>Goal</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>yes_no</code></td>
          <td>Judgment Assistant</td>
          <td>Return a clear yes/no conclusion</td>
      </tr>
      <tr>
          <td><code>information</code></td>
          <td>Information Assistant</td>
          <td>Extract and summarize facts</td>
      </tr>
      <tr>
          <td><code>chitchat</code></td>
          <td>Chitchat Assistant</td>
          <td>Provide conversational responses</td>
      </tr>
      <tr>
          <td><code>exception</code></td>
          <td>Exception Assistant</td>
          <td>Guide user clarification</td>
      </tr>
  </tbody>
</table>
<p><strong>Prompt Example:</strong></p>
<blockquote>
<p>You are an intelligent routing assistant for an FAQ chatbot.
Based on the user‚Äôs most recent question, classify it into one of the following <strong>five mutually exclusive categories</strong> and return the corresponding <strong>English key</strong>.</p>
<h3 id="category-definitions">Category Definitions<a hidden class="anchor" aria-hidden="true" href="#category-definitions">#</a></h3>
<ol>
<li><strong>Yes/No Question</strong> ‚Äì key: <code>yes_no</code>
The user expects a confirmation or denial.
Examples: ‚ÄúCan I get a refund?‚Äù ‚ÄúDoes this work on Android?‚Äù</li>
<li><strong>Informational Question</strong> ‚Äì key: <code>information</code>
The user asks for facts or instructions.
Examples: ‚ÄúWhat‚Äôs your customer service number?‚Äù ‚ÄúHow do I reset my password?‚Äù</li>
<li><strong>Chitchat / Irrelevant</strong> ‚Äì key: <code>chitchat</code>
Small talk or unrelated input.
Examples: ‚ÄúHow‚Äôs your day?‚Äù ‚ÄúTell me a joke.‚Äù</li>
<li><strong>Exception / Complaint / Ambiguous</strong> ‚Äì key: <code>exception</code>
The user expresses confusion or dissatisfaction.
Examples: ‚ÄúThe system‚Äôs broken!‚Äù ‚ÄúWhy doesn‚Äôt this work?‚Äù</li>
</ol>
<h3 id="output-format">Output Format<a hidden class="anchor" aria-hidden="true" href="#output-format">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;&lt;Chinese category name&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;&lt;routing key&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;reason&#34;</span>: <span style="color:#e6db74">&#34;&lt;brief explanation&gt;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></blockquote>
<hr>
<h3 id="-2-the-expert-models-14-domain-precision">üéØ 2. The Expert Models (1‚Äì4): Domain Precision<a hidden class="anchor" aria-hidden="true" href="#-2-the-expert-models-14-domain-precision">#</a></h3>
<p>Each expert model focuses on one type of query and one output goal ‚Äî ensuring clarity, reliability, and specialization.</p>
<hr>
<h4 id="-expert-1-judgment-assistant-">üîπ Expert 1: **Judgment Assistant **<a hidden class="anchor" aria-hidden="true" href="#-expert-1-judgment-assistant-">#</a></h4>
<p><strong>Goal:</strong> Return a definitive binary answer.
<strong>Prompt Strategy:</strong> Allow only ‚Äúyes,‚Äù ‚Äúno,‚Äù or ‚Äúuncertain.‚Äù Never fabricate or guess.
<strong>Thinking:</strong> When data is missing, admit uncertainty instead of hallucinating.</p>
<p><strong>Prompt Example:</strong></p>
<blockquote>
<p>You are a precise, reliable assistant.
Determine whether the user‚Äôs question is true or false based on the reference data.
Output only one clear conclusion (‚ÄúYes‚Äù or ‚ÄúNo‚Äù), with a short explanation.
If insufficient information is available, respond ‚ÄúUncertain‚Äù and explain why.
Never invent facts.</p></blockquote>
<hr>
<h4 id="-expert-2-information-assistant-">üîπ Expert 2: **Information Assistant **<a hidden class="anchor" aria-hidden="true" href="#-expert-2-information-assistant-">#</a></h4>
<p><strong>Goal:</strong> Provide concise, accurate, complete information.
<strong>Prompt Strategy:</strong> Use only retrieved knowledge (RAG results); summarize without adding assumptions.
<strong>Thinking:</strong> Shift from <em>generation</em> to <em>information synthesis</em> for factual reliability.</p>
<p><strong>Prompt Example:</strong></p>
<blockquote>
<p>You are a knowledgeable assistant.
Using the reference materials, provide a clear, accurate, and complete answer.</p>
<ul>
<li>Use only the given references.</li>
<li>Summarize concisely if multiple points are relevant.</li>
<li>If no answer is found, say ‚ÄúNo related information found.‚Äù</li>
<li>Remain objective and factual.</li>
</ul></blockquote>
<hr>
<h4 id="-expert-3-chitchat-assistant-">üîπ Expert 3: **Chitchat Assistant **<a hidden class="anchor" aria-hidden="true" href="#-expert-3-chitchat-assistant-">#</a></h4>
<p><strong>Goal:</strong> Maintain natural, empathetic small talk.
<strong>Prompt Strategy:</strong> Avoid facts or knowledge; focus on emotion and rapport.
<strong>Thinking:</strong> Filters out off-topic input and keeps the conversation human.</p>
<p><strong>Prompt Example:</strong></p>
<blockquote>
<p>You are a warm, friendly conversational partner.
Continue the conversation naturally based on the chat history.</p>
<ol>
<li>Keep it natural and sincere.</li>
<li>Avoid factual or technical content.</li>
<li>Reply in 1‚Äì2 short, human-like sentences.</li>
<li>Respond to emotion first, then to topic.</li>
<li>Do not include any system messages or tags.</li>
</ol></blockquote>
<hr>
<h4 id="-expert-4--exception-assistant-">üîπ Expert 4: ** Exception Assistant **<a hidden class="anchor" aria-hidden="true" href="#-expert-4--exception-assistant-">#</a></h4>
<p><strong>Goal:</strong> Help users clarify vague or invalid inputs gracefully.
<strong>Prompt Strategy:</strong> Never fabricate; guide users to restate their problem politely.
<strong>Thinking:</strong> Treat ‚Äúerrors‚Äù as opportunities for recovery, not dead ends.</p>
<p><strong>Prompt Example:</strong></p>
<blockquote>
<p>You are a calm, helpful assistant.
When the input is incomplete, confusing, or irrelevant, do <strong>not</strong> guess or output technical errors.
Instead, help the user clarify their question politely.
Keep replies under two sentences and focus on continuing the conversation.</p></blockquote>
<hr>
<h2 id="step-2-implementing-in-langgraph"><strong>Step 2: Implementing in LangGraph</strong><a hidden class="anchor" aria-hidden="true" href="#step-2-implementing-in-langgraph">#</a></h2>
<p><strong>LangGraph</strong> lets you design and execute autonomous, controllable AI systems with a <strong>graph-based mental model</strong>.</p>
<h3 id="1-define-the-shared-state">1. Define the Shared State<a hidden class="anchor" aria-hidden="true" href="#1-define-the-shared-state">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AgentState</span>(TypedDict):
</span></span><span style="display:flex;"><span>    messages: List[BaseMessage]
</span></span><span style="display:flex;"><span>    category: str <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>    reference: str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    answer: str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><h3 id="2-router-node-classify-and-route">2. Router Node: Classify and Route<a hidden class="anchor" aria-hidden="true" href="#2-router-node-classify-and-route">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">classify_question</span>(state: AgentState) <span style="color:#f92672">-&gt;</span> AgentState:
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> llm_response(CLASSIFIER_PROMPT_TEMPLATE, state)
</span></span><span style="display:flex;"><span>    state[<span style="color:#e6db74">&#39;category&#39;</span>] <span style="color:#f92672">=</span> result<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;key&#34;</span>, <span style="color:#e6db74">&#34;exception&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> state
</span></span></code></pre></div><h3 id="3-expert-nodes">3. Expert Nodes<a hidden class="anchor" aria-hidden="true" href="#3-expert-nodes">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">expert_yes_no</span>(state: AgentState) <span style="color:#f92672">-&gt;</span> AgentState:
</span></span><span style="display:flex;"><span>    state[<span style="color:#e6db74">&#34;reference&#34;</span>] <span style="color:#f92672">=</span> tool_retrieve_from_rag(state)
</span></span><span style="display:flex;"><span>    state[<span style="color:#e6db74">&#34;answer&#34;</span>]  <span style="color:#f92672">=</span> llm_response(YES_NO_PROMPT, state)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> state
</span></span></code></pre></div><p>‚Ä¶and similarly for the other experts.</p>
<h3 id="4-routing-logic">4. Routing Logic<a hidden class="anchor" aria-hidden="true" href="#4-routing-logic">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">route_question</span>(state: AgentState) <span style="color:#f92672">-&gt;</span> str:
</span></span><span style="display:flex;"><span>    category <span style="color:#f92672">=</span> state<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;category&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;yes_no&#39;</span>: <span style="color:#e6db74">&#39;to_yes_no&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;information&#39;</span>: <span style="color:#e6db74">&#39;to_information&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;chitchat&#39;</span>: <span style="color:#e6db74">&#39;to_chitchat&#39;</span>
</span></span><span style="display:flex;"><span>    }<span style="color:#f92672">.</span>get(category, <span style="color:#e6db74">&#39;to_exception&#39;</span>)
</span></span></code></pre></div><h3 id="5-build-the-graph">5. Build the Graph<a hidden class="anchor" aria-hidden="true" href="#5-build-the-graph">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>workflow <span style="color:#f92672">=</span> StateGraph(AgentState)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>add_node(<span style="color:#e6db74">&#34;classifier&#34;</span>, classify_question)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>add_node(<span style="color:#e6db74">&#34;yes_no_expert&#34;</span>, expert_yes_no)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>add_node(<span style="color:#e6db74">&#34;info_expert&#34;</span>, expert_information)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>add_node(<span style="color:#e6db74">&#34;chitchat_expert&#34;</span>, expert_chitchat)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>add_node(<span style="color:#e6db74">&#34;exception_expert&#34;</span>, expert_exception)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>set_entry_point(<span style="color:#e6db74">&#34;classifier&#34;</span>)
</span></span><span style="display:flex;"><span>workflow<span style="color:#f92672">.</span>add_conditional_edges(<span style="color:#e6db74">&#34;classifier&#34;</span>, route_question, {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;to_yes_no&#34;</span>: <span style="color:#e6db74">&#34;yes_no_expert&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;to_information&#34;</span>: <span style="color:#e6db74">&#34;info_expert&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;to_chitchat&#34;</span>: <span style="color:#e6db74">&#34;chitchat_expert&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;to_exception&#34;</span>: <span style="color:#e6db74">&#34;exception_expert&#34;</span>,
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> workflow<span style="color:#f92672">.</span>compile()
</span></span></code></pre></div><hr>
<h2 id="step-3-testing"><strong>Step 3: Testing</strong><a hidden class="anchor" aria-hidden="true" href="#step-3-testing">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>run_agent(<span style="color:#e6db74">&#34;Can I get a refund?&#34;</span>)
</span></span><span style="display:flex;"><span>run_agent(<span style="color:#e6db74">&#34;What‚Äôs your support hotline?&#34;</span>)
</span></span><span style="display:flex;"><span>run_agent(<span style="color:#e6db74">&#34;How‚Äôs your day?&#34;</span>)
</span></span></code></pre></div><p>This demonstrates how <strong>strategic thinking</strong> replaces linear scripting:</p>
<ul>
<li><strong>Classifier node:</strong> doesn‚Äôt rush to answer; decides how to handle it.</li>
<li><strong>Dynamic routing:</strong> dispatches queries to the right expert in real time.</li>
<li><strong>Expert execution:</strong> each model stays focused on its purpose and optimized prompt.</li>
</ul>
<hr>
<h2 id="conclusion-the-shift-in-agent-thinking"><strong>Conclusion: The Shift in Agent Thinking</strong><a hidden class="anchor" aria-hidden="true" href="#conclusion-the-shift-in-agent-thinking">#</a></h2>
<table>
  <thead>
      <tr>
          <th>Dimension</th>
          <th>Traditional (Process Thinking)</th>
          <th>Agent (Strategic Thinking)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Architecture</strong></td>
          <td>Linear if/else logic, one model handles all</td>
          <td>Expert routing network, multi-model cooperation</td>
      </tr>
      <tr>
          <td><strong>Problem Handling</strong></td>
          <td>Failure leads to fallback or human handoff</td>
          <td>Dynamic decision-making via routing</td>
      </tr>
      <tr>
          <td><strong>Prompt Design</strong></td>
          <td>One prompt tries to do everything</td>
          <td>Each prompt handles one precise sub-goal</td>
      </tr>
      <tr>
          <td><strong>Focus</strong></td>
          <td>Whether each step executes correctly</td>
          <td>Whether the overall strategy achieves the goal</td>
      </tr>
  </tbody>
</table>
<hr>
<p>This is the essence of <strong>Agent-based design</strong> ‚Äî not just smarter models, but smarter systems that can reason, route, and self-optimize.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Thinking in Agents</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
